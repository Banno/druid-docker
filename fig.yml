zookeeper:
  image: jplock/zookeeper:3.4.6
  ports:
    - "2181:2181"

postgres:
  build: ./postgres
  ports:
    - "5432:5432"

kafka:
  image: wurstmeister/kafka:0.8.2.0
  links:
    - zookeeper
  ports:
    - "9092:9092"
  environment:
    KAFKA_ADVERTISED_HOST_NAME: 192.168.59.103
    KAFKA_ADVERTISED_PORT: 9092
    KAFKA_ZOOKEEPER_CONNECT: 192.168.59.103/kafka
    KAFKA_BROKER_ID: 1

twitterproducer:
  image: 

druidbroker:
  image: banno/druid-broker:latest
  links:
    - zookeeper
  ports:
    - "8082:8082"
  environment:
    DRUID_HOST: 192.168.59.103
    DRUID_ZK_SERVICE_HOST: 192.168.59.103:2181

druidcoordinator:
  image: banno/druid-coordinator:latest
  links:
    - zookeeper
    - postgres
  ports:
    - "8081:8081"
  environment:
    DRUID_HOST: 192.168.59.103
    DRUID_ZK_SERVICE_HOST: 192.168.59.103:2181
    POSTGRES_HOST: 192.168.59.103
    POSTGRES_DATABASE: druid
    POSTGRES_USER: druid
    POSTGRES_PASSWORD: diurd

druidhistorical:
  image: banno/druid-historical:latest
  links:
    - zookeeper
  ports:
    - "8083:8083"
  environment:
    DRUID_HOST: 192.168.59.103
    DRUID_ZK_SERVICE_HOST: 192.168.59.103:2181

druidrealtime:
  image: banno/druid-realtime:latest
  links:
    - zookeeper
    - kafka
  ports:
    - "8084:8084"
  environment:
    DRUID_HOST: 192.168.59.103
    DRUID_ZK_SERVICE_HOST: 192.168.59.103:2181

druid:
  image: ubuntu:14.04
  command: echo "Druid rules"
  links:
    - druidbroker
    - druidcoordinator
    - druidhistorical
    - druidrealtime
